<p-sidebar
  [(visible)]="visible"
  position="right"
  [showCloseIcon]="false"
  [dismissible]="false"
  [closeOnEscape]="false"
  [style]="{ width: '100%' }"
>
  <main>
    <form
      [formGroup]="cityForm"
      #myForm="ngForm"
      (ngSubmit)="myForm.valid && validate()"
    >
      <header>
        <span>
          Update the city
          <span class="city-name">{{ city.name | titlecase }}</span>
        </span>
      </header>
      <div class="input-label">
        <label for="cityName">Capital Name <span class="error">*</span></label>
        <input
          type="text"
          id="cityName"
          name="cityName"
          formControlName="name"
        />
        <div class="error" *ngIf="myForm.submitted">
          <span *ngIf="cityForm?.get('name')?.errors?.['required']"
            >City is required</span
          >
          <span *ngIf="cityForm?.get('name')?.errors?.['minlength']"
            >Length must be greater than 2</span
          >
        </div>
      </div>
      <div class="input-label">
        <label for="cityCountry">Country <span class="error">*</span> </label>
        <input
          type="text"
          id="cityCountry"
          name="cityCountry"
          formControlName="country"
        />
        <div *ngIf="myForm.submitted" class="error">
          <span *ngIf="cityForm?.get('country')?.errors?.['required']"
            >Country is required</span
          >
          <span *ngIf="cityForm?.get('country')?.errors?.['minlength']"
            >Length must be greater than 2</span
          >
        </div>
      </div>
      <div class="input-label">
        <label for="cityImgUrl">Image </label>
        <input
          type="text"
          id="cityImgUrl"
          name="cityImgUrl"
          formControlName="imgUrl"
        />
      </div>
      <div class="input-label">
        <label for="cityPopulation"
          >Population <span class="error">*</span></label
        >
        <input
          type="number"
          id="cityPopulation"
          name="cityPopulation"
          formControlName="population"
        />
        <div *ngIf="myForm.submitted" class="error">
          <span *ngIf="cityForm?.get('population')?.errors?.['required']"
            >Population is required</span
          >
          <span *ngIf="cityForm?.get('population')?.errors?.['validRange']"
            >Population must be greater than zero</span
          >
        </div>
      </div>
      <div class="input-label">
        <label for="cityLat"
          >Capital Latitude <span class="error">*</span></label
        >
        <input
          type="number"
          id="cityLat"
          name="cityLat"
          formControlName="latitude"
        />
        <div *ngIf="myForm.submitted" class="error">
          <span *ngIf="cityForm?.get('latitude')?.errors?.['required']"
            >Latitude is required</span
          >
          <span *ngIf="cityForm?.get('latitude')?.errors?.['validRange']"
            >Latitude must be in rang [-90, +90]</span
          >
        </div>
      </div>
      <div class="input-label">
        <label for="cityLng"
          >Capital Longitude <span class="error">*</span></label
        >
        <input
          type="number"
          id="cityLng"
          name="cityLng"
          formControlName="longitude"
        />
        <div *ngIf="myForm.submitted" class="error">
          <span *ngIf="cityForm?.get('longitude')?.errors?.['required']"
            >Longitude is required</span
          >
          <span *ngIf="cityForm?.get('longitude')?.errors?.['validRange']"
            >Longitude must be in rang [-180, +180]</span
          >
        </div>
      </div>
      <div class="control">
        <button [ngClass]="'not-active'" (click)="cancel()" type="button">
          Cancel
        </button>
        <button [ngClass]="'active'" type="submit">
          <span> Update </span>
        </button>
      </div>
    </form>
  </main>
</p-sidebar>
